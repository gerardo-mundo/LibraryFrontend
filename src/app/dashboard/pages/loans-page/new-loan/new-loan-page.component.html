<form
	(ngSubmit)="onNewLoan()"
	[formGroup]="loanForm"
	class="flex flex-column align-items-center surface-section py-6 px-4"
>
	<p class="text-primary mt-4 ml-2">Registra un préstamo de libro por tipo de usuario. Máximo tres ejemplares.</p>
	<div class="mt-5">
		<p-selectButton
			formControlName="type"
			[options]="userTypes"
			[multiple]="false"
			optionLabel="name"
			optionValue="value"
			(onOptionClick)="selectedOption($event)"
		>
		</p-selectButton>
		<!-- <small *ngIf="isValidField('type')" class="ml-2 text-red-500">{{displayError('type')}}</small> -->
	</div>
	<div class="w-full sm:w-6">
		<div class="p-float-label mt-5">
			<p-multiSelect
				inputId="float-label"
				[options]="user"
				formControlName="selectedUser"
				optionLabel="name"
				[virtualScroll]="true"
				(onChange)="selectedBooks($event)"
				[style]="{ width: '100%' }"
				[virtualScrollItemSize]="20"
			>
			</p-multiSelect>
			<label for="float-label">Seleccione al usuario</label>
		</div>
		<!-- <small *ngIf="isValidField('name')" class="ml-2 text-red-500">{{displayError('name')}}</small> -->
	</div>
	<div class="w-full sm:w-6">
		<div class="p-float-label mt-5">
			<p-multiSelect
				[selectionLimit]="3"
				display="chip"
				inputId="float-label"
				[options]="books"
				formControlName="selectedBooks"
				optionLabel="title"
				[virtualScroll]="true"
				[style]="{ width: '100%' }"
				[virtualScrollItemSize]="40"
			>
			</p-multiSelect>
			<label for="float-label">Seleccionar los libros</label>
		</div>
		<!-- <small *ngIf="isValidField('name')" class="ml-2 text-red-500">{{displayError('name')}}</small> -->
	</div>
	<div class="flex w-full flex-column sm:w-6">
		<dashboard-add-button [isLoading]="loading" [label]="'Crear préstamo'" [invalid]="loanForm.invalid" />
	</div>
	<p-toast position="top-center"></p-toast>
</form>
