# Actualizado para usar Node.js 18.x
FROM vm/ubuntu:18.04

# Instalar Node.js 18 LTS (Hydrogen)
RUN curl -sL https://deb.nodesource.com/setup_18.x | bash && \
    apt-get install --no-install-recommends gcc g++ make nodejs && \
    rm -f /etc/apt/sources.list.d/nodesource.list

# Instalar Angular CLI globalmente
RUN npm install -g @angular/cli

COPY . .
RUN npm install
RUN ng build --optimization=false

# Ejecutar Angular en segundo plano
RUN BACKGROUND ng serve --host 0.0.0.0 --disable-host-check

# Exponer el puerto de la aplicaci√≥n Angular
EXPOSE WEBSITE http://localhost:4200
